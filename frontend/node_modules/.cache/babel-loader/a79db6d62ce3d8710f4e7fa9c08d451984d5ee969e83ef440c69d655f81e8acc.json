{"ast":null,"code":"import { defineComponent, ref } from 'vue';\nimport axios from 'axios';\nexport default defineComponent({\n  name: 'WordCloudComponent',\n  setup() {\n    const textarea = ref('');\n    const pic = ref('');\n\n    // 图片适应方式\n    const fit = 'fill';\n    async function onSubmit() {\n      const param = {\n        word: textarea.value\n      };\n      try {\n        const res = await axios.post('/word/cloud/generate', param);\n        pic.value = `data:image/png;base64,${res.data}`;\n      } catch (error) {\n        console.log(error.response?.data);\n      }\n    }\n    function onDownload() {\n      // const imgUrl = `data:image/png;base64,${pic.value}`\n      const imgUrl = pic.value;\n      const a = document.createElement('a');\n      a.href = imgUrl;\n      a.setAttribute('download', 'word-cloud.png');\n      document.body.appendChild(a); // 确保a标签存在于DOM中以触发点击事件\n      a.click();\n      document.body.removeChild(a); // 事件触发后移除a标签\n    }\n\n    // 添加getImageSrc方法\n    function getImageSrc() {\n      // return pic.value ? `data:image/png;base64,${pic.value}` : ''\n      return pic.value ? pic.value : '';\n    }\n    return {\n      textarea,\n      pic,\n      fit,\n      onSubmit,\n      onDownload,\n      getImageSrc\n    };\n  }\n});","map":{"version":3,"names":["defineComponent","ref","axios","name","setup","textarea","pic","fit","onSubmit","param","word","value","res","post","data","error","console","log","response","onDownload","imgUrl","a","document","createElement","href","setAttribute","body","appendChild","click","removeChild","getImageSrc"],"sources":["D:\\wendang\\vscode\\my_projects\\flask_vue_wordcloud\\word-cloud\\frontend\\src\\views\\WordCloud.vue"],"sourcesContent":["/* eslint-disable */\n<!-- <template>\n    <div class=\"WordCloud\">\n        <h2>小词云</h2>\n        <div id=\"word-text-area\">\n            <el-input type=\"textarea\" :rows=\"10\" placeholder=\"请输入内容\" v-model=\"textarea\">\n            </el-input>\n            <div id=\"word-img\">\n                <el-image :src=\"getImageSrc()\" :fit=\"fit\">\n                    <template #error>\n                        <div class=\"image-slot\">\n                            <i class=\"el-icon-picture-outline\"></i>\n                        </div>\n                    </template>\n                </el-image>\n            </div>\n            <div id=\"word-operation\">\n                <el-row>\n                    <el-button type=\"primary\" @click=\"onSubmit\" round>生成词云</el-button>\n                    <el-button type=\"success\" @click=\"onDownload\" round>下载图片</el-button>\n                </el-row>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'WordCloudComponent',\n  data () {\n    return {\n      textarea: '',\n      pic: '',\n      pageTitle: 'Flask Vue Word Cloud'\n    }\n  },\n  methods: {\n    onSubmit () {\n      const param = {\n        word: this.textarea\n      }\n      this.axios.post('/word/cloud/generate', param).then(\n        res => {\n          this.pic = res.data\n          console.log(res.data)\n        }\n      ).catch(res => {\n        console.log(res.data.res)\n      })\n    },\n    onDownload () {\n      const imgUrl = 'data:image/png;base64,' + this.pic\n      const a = document.createElement('a')\n      a.href = imgUrl\n      a.setAttribute('download', 'word-cloud')\n      a.click()\n    },\n    // 添加getImageSrc方法\n    getImageSrc () {\n      if (this.pic) {\n        return `data:image/png;base64,${this.pic}`\n      } else {\n        return '' // 或者返回默认的占位图地址\n      }\n    }\n  }\n}\n</script> -->\n\n<!-- <template>\n    <div class=\"WordCloudComponent\">\n        <h2>小词云</h2>\n        <div id=\"word-text-area\">\n            <el-input type=\"textarea\" :rows=\"10\" placeholder=\"请输入内容\" v-model=\"textarea\"></el-input>\n            <div id=\"word-img\">\n                <el-image :src=\"getImageSrc()\" :fit=\"fit\">\n                    <template #error>\n                        <div class=\"image-slot\">\n                            <i class=\"el-icon-picture-outline\"></i>\n                        </div>\n                    </template>\n                </el-image>\n            </div>\n            <div id=\"word-operation\">\n                <el-row>\n                    <el-button type=\"primary\" @click=\"onSubmit\" round>生成词云</el-button>\n                    <el-button type=\"success\" @click=\"onDownload\" round v-if=\"pic\">下载图片</el-button>\n                </el-row>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport axios from 'axios'\n\nexport default defineComponent({\n  name: 'WordCloudComponent',\n  setup () {\n    const textarea = ref('')\n    const pic = ref('')\n    const fit = 'fill' // 或者选择其他适合的图片适应方式\n\n    async function onSubmit () {\n      const param = {\n        word: textarea.value\n      }\n      try {\n        const res = await axios.post('/word/cloud/generate', param)\n        pic.value = `data:image/png;base64,${res.data}`\n      } catch (error) {\n        console.log(error.response?.data)\n      }\n    }\n\n    function onDownload () {\n      const imgUrl = `data:image/png;base64,${pic.value}`\n      const a = document.createElement('a')\n      a.href = imgUrl\n      a.setAttribute('download', 'word-cloud.png')\n      document.body.appendChild(a) // 确保a标签存在于DOM中以触发点击事件\n      a.click()\n      document.body.removeChild(a) // 事件触发后移除a标签\n    }\n\n    function getImageSrc () {\n      return pic.value ? `data:image/png;base64,${pic.value}` : ''\n    }\n\n    return {\n      textarea,\n      pic,\n      fit,\n      onSubmit,\n      onDownload,\n      getImageSrc\n    }\n  }\n})\n</script> -->\n\n<!-- <template>\n    <div class=\"about\">\n        <h1>This is an about page</h1>\n    </div>\n</template> -->\n\n<template>\n  <div class=\"WordCloudComponent\">\n    <h2>小词云</h2>\n    <div id=\"word-text-area\">\n      <el-input type=\"textarea\" :rows=\"10\" placeholder=\"请输入内容\" v-model=\"textarea\"></el-input>\n      <div id=\"word-img\">\n        <el-image :src=\"getImageSrc()\" :fit=\"fit\">\n          <template #error>\n            <div class=\"image-slot\">\n              <i class=\"el-icon-picture-outline\"></i>\n            </div>\n          </template>\n        </el-image>\n      </div>\n      <div id=\"word-operation\">\n        <el-row>\n          <el-button type=\"primary\" @click=\"onSubmit\" round>生成词云</el-button>\n          <el-button type=\"success\" @click=\"onDownload\" round v-if=\"pic\">下载图片</el-button>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport axios from 'axios'\n\nexport default defineComponent({\n  name: 'WordCloudComponent',\n  setup() {\n    const textarea = ref('')\n    const pic = ref('')\n\n    // 图片适应方式\n    const fit = 'fill'\n\n    async function onSubmit() {\n      const param = {\n        word: textarea.value\n      }\n      try {\n        const res = await axios.post('/word/cloud/generate', param)\n        pic.value = `data:image/png;base64,${res.data}`\n      } catch (error) {\n        console.log(error.response?.data)\n      }\n    }\n\n    function onDownload() {\n      // const imgUrl = `data:image/png;base64,${pic.value}`\n      const imgUrl = pic.value\n      const a = document.createElement('a')\n      a.href = imgUrl\n      a.setAttribute('download', 'word-cloud.png')\n      document.body.appendChild(a) // 确保a标签存在于DOM中以触发点击事件\n      a.click()\n      document.body.removeChild(a) // 事件触发后移除a标签\n    }\n\n    // 添加getImageSrc方法\n    function getImageSrc() {\n      // return pic.value ? `data:image/png;base64,${pic.value}` : ''\n      return pic.value ? pic.value : ''\n    }\n\n    return {\n      textarea,\n      pic,\n      fit,\n      onSubmit,\n      onDownload,\n      getImageSrc\n    }\n  }\n})\n</script>\n"],"mappings":"AA6KA,SAASA,eAAe,EAAEC,GAAE,QAAS,KAAI;AACzC,OAAOC,KAAI,MAAO,OAAM;AAExB,eAAeF,eAAe,CAAC;EAC7BG,IAAI,EAAE,oBAAoB;EAC1BC,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIJ,GAAG,CAAC,EAAE;IACvB,MAAMK,GAAE,GAAIL,GAAG,CAAC,EAAE;;IAElB;IACA,MAAMM,GAAE,GAAI,MAAK;IAEjB,eAAeC,QAAQA,CAAA,EAAG;MACxB,MAAMC,KAAI,GAAI;QACZC,IAAI,EAAEL,QAAQ,CAACM;MACjB;MACA,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMV,KAAK,CAACW,IAAI,CAAC,sBAAsB,EAAEJ,KAAK;QAC1DH,GAAG,CAACK,KAAI,GAAK,yBAAwBC,GAAG,CAACE,IAAK;MAChD,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAACG,QAAQ,EAAEJ,IAAI;MAClC;IACF;IAEA,SAASK,UAAUA,CAAA,EAAG;MACpB;MACA,MAAMC,MAAK,GAAId,GAAG,CAACK,KAAI;MACvB,MAAMU,CAAA,GAAIC,QAAQ,CAACC,aAAa,CAAC,GAAG;MACpCF,CAAC,CAACG,IAAG,GAAIJ,MAAK;MACdC,CAAC,CAACI,YAAY,CAAC,UAAU,EAAE,gBAAgB;MAC3CH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,CAAC,GAAE;MAC7BA,CAAC,CAACO,KAAK,CAAC;MACRN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,CAAC,GAAE;IAC/B;;IAEA;IACA,SAASS,WAAWA,CAAA,EAAG;MACrB;MACA,OAAOxB,GAAG,CAACK,KAAI,GAAIL,GAAG,CAACK,KAAI,GAAI,EAAC;IAClC;IAEA,OAAO;MACLN,QAAQ;MACRC,GAAG;MACHC,GAAG;MACHC,QAAQ;MACRW,UAAU;MACVW;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}